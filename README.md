# 📝 Next.js + Supabase 云端留言板 (Guestbook)

这是一个基于 **Next.js 14 (App Router)** 和 **Supabase** 构建的 Serverless 全栈留言板应用 demo。

## 🛠 技术栈

- **框架**: [Next.js](https://nextjs.org/) (React, TypeScript, App Router)
- **后端/数据库**: [Supabase](https://supabase.com/) (PostgreSQL)
- **部署**: [Vercel](https://vercel.com/)
- **样式**: Tailwind CSS

## 🚀 功能特性

- **Server Actions**: 利用 Next.js 的服务端 Server Actions 直接处理表单提交，无需编写 API Routes。
- **实时数据**: 页面加载时服务端获取最新留言。
- **极简架构**: 无需传统后端服务器，完全 Serverless。

## 🏁 快速开始

### 1. 克隆项目

```bash
git clone [https://github.com/你的用户名/你的仓库名.git](https://github.com/你的用户名/你的仓库名.git)
cd 你的仓库名
```

### 2. 安装依赖

```bash
npm install
# 或者
yarn install
```

### 3. 配置 Supabase 数据库

1. 登录 [Supabase Dashboard](https://supabase.com/dashboard) 创建一个新项目。
2. 进入 **SQL Editor**，运行以下 SQL 语句来创建数据表：

```sql
create table messages (
  id bigint generated by default as identity primary key,
  created_at timestamp with time zone default timezone('utc'::text, now()) not null,
  content text not null
);
```

3. (可选) 如果需要开启安全性，请配置 RLS (Row Level Security) 策略。为演示方便，可暂时允许 public 读写。

### 4. 配置环境变量

复制 `.env.example` 为 `.env.local` (如果没有 example 文件，直接新建 `.env.local`)：

```bash
touch .env.local
```

在 `.env.local` 中填入你的 Supabase 密钥：

```env
NEXT_PUBLIC_SUPABASE_URL=你的_Supabase_Project_URL
NEXT_PUBLIC_SUPABASE_ANON_KEY=你的_Supabase_Anon_Key
```

> ⚠️ **注意**: `NEXT_PUBLIC_SUPABASE_ANON_KEY` 是客户端安全的，但请勿泄露 `service_role_key`。

### 5. 运行本地开发服务器

```bash
npm run dev
```

打开浏览器访问 [http://localhost:3000](http://localhost:3000) 即可看到留言板。

## 📦 部署 (Vercel)

本项目针对 Vercel 进行了优化，部署非常简单：

1. 将代码推送到 GitHub。
2. 登录 Vercel 并导入该仓库。
3. 在 Vercel 的 **Environment Variables** 设置中添加 `NEXT_PUBLIC_SUPABASE_URL` 和 `NEXT_PUBLIC_SUPABASE_ANON_KEY`。
4. 点击 **Deploy**。

## 📄 License

MIT